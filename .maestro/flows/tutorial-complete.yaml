# Tutorial Complete Flow - Plays through Anchor Station tutorial
# Cross-platform: Web, Android, iOS

appId: "${PLATFORM == 'android' ? 'com.jbcom.stellardescent' : (PLATFORM == 'ios' ? 'com.jbcom.stellardescent' : null)}"
url: "${PLATFORM == 'web' ? 'http://localhost:8080' : null}"
tags:
  - gameplay
  - tutorial
  - extended
name: "Tutorial Complete Playthrough"

---
- launchApp:
    clearState: true

- extendedWaitUntil:
    visible: "NEW GAME"
    timeout: 30000

- tapOn:
    text: "NEW GAME"

- extendedWaitUntil:
    visible: "SYSTEMS ONLINE"
    timeout: 60000

# Wait for tutorial to start
- extendedWaitUntil:
    visible: "Good morning"
    timeout: 30000

- takeScreenshot: "tutorial_start"

# Skip through tutorial comms
- tapOn:
    text: "ACKNOWLEDGE"
    optional: true

- wait: 1000

- tapOn:
    text: "ACKNOWLEDGE"
    optional: true

- wait: 1000

- tapOn:
    text: "SKIP"
    optional: true

- wait: 2000

# Tutorial movement (for mobile)
- swipe:
    start: "10%, 70%"
    end: "15%, 65%"
    duration: 2000

- wait: 1000

# Tutorial look around (for mobile)
- swipe:
    start: "80%, 50%"
    end: "70%, 40%"
    duration: 1500

- wait: 1000

# Tutorial interact/fire
- tapOn:
    id: "interact-button"
    optional: true

- tapOn:
    id: "fire-button"
    optional: true

- wait: 2000

- takeScreenshot: "tutorial_progress"

# Continue through tutorial prompts
- tapOn:
    text: "Continue"
    optional: true

- tapOn:
    text: "CONTINUE"
    optional: true

- wait: 3000

- takeScreenshot: "tutorial_end"
