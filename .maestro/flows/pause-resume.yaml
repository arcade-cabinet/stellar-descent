# Pause and Resume Flow - Tests pause menu during gameplay
# Cross-platform: Web, Android, iOS

appId: "${PLATFORM == 'android' ? 'com.jbcom.stellardescent' : (PLATFORM == 'ios' ? 'com.jbcom.stellardescent' : null)}"
url: "${PLATFORM == 'web' ? 'http://localhost:8080' : null}"
tags:
  - gameplay
  - pause
name: "Pause and Resume Test"

---
- launchApp:
    clearState: true

- extendedWaitUntil:
    visible: "NEW GAME"
    timeout: 30000

- tapOn:
    text: "NEW GAME"

- extendedWaitUntil:
    visible: "SYSTEMS ONLINE"
    timeout: 60000

# Wait for game to be playable (skip tutorial comms)
- wait: 3000

# Skip tutorial comms by pressing space/clicking
- tapOn:
    text: "ACKNOWLEDGE"
    optional: true

- wait: 1000

# Tap pause button (usually top-right corner)
- tapOn:
    id: "pause-button"
    optional: true

# Alternative: tap center-top area where pause often is
- tapOn:
    point: "95%, 5%"
    optional: true

# Check pause menu appears
- assertVisible:
    text: "RESUME"
    optional: true
    timeout: 5000

- assertVisible:
    text: "QUIT"
    optional: true

- takeScreenshot: "pause_menu"

# Resume game
- tapOn:
    text: "RESUME"
    optional: true

- wait: 1000

- takeScreenshot: "resumed_gameplay"
