# Orientation Check Flow - Verifies landscape enforcement
# Platform: Android, iOS (mobile-specific)

appId: ${PLATFORM == 'android' ? 'com.jbcom.stellardescent' : (PLATFORM == 'ios' ? 'com.jbcom.stellardescent' : null)}
url: ${PLATFORM == 'web' ? 'http://localhost:8080' : null}
tags:
  - mobile-only
  - orientation
name: "Orientation Check - Landscape Enforcement"

---
- launchApp:
    clearState: true

# App should launch in landscape
- takeScreenshot: "initial_orientation"

# Verify main menu is accessible
- extendedWaitUntil:
    visible: "NEW CAMPAIGN"
    timeout: 30000

# Test rotating to portrait (should show error or auto-rotate back)
- setDeviceOrientation: portrait

- wait: 2000

# Should either show "rotate device" message or force landscape
- takeScreenshot: "portrait_attempt"

# Check for orientation warning
- assertVisible:
    text: "rotate"
    optional: true

- assertVisible:
    text: "Landscape"
    optional: true

# Rotate back to landscape
- setDeviceOrientation: landscape

- wait: 1000

# Verify game is still functional
- assertVisible:
    text: "NEW CAMPAIGN"
    timeout: 5000

- takeScreenshot: "landscape_restored"
