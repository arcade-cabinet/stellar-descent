# Full Playthrough Flow - Extended gameplay test
# Run: maestro test .maestro/flows/full-playthrough.yaml
# Note: This is a long-running test for smoke testing full campaign

appId: com.jbcom.stellardescent

---
- launchApp:
    clearState: true

- tapOn:
    text: "NEW GAME"
    timeout: 10000

# Wait for initial load
- extendedWaitUntil:
    notVisible:
      text: "Loading"
    timeout: 60000

# Anchor Station - Tutorial Level
- runFlow: tutorial-complete.yaml

# After tutorial, continue to next level
- wait: 5000

# Look for level transition
- assertVisible:
    text: "Landfall"
    optional: true
    timeout: 30000

- takeScreenshot: "level_2_start"

# Basic movement through Landfall
- repeat:
    times: 5
    commands:
      - swipe:
          start: "10%, 70%"
          end: "15%, 60%"
          duration: 3000
      - wait: 1000
      - tapOn:
          id: "fire-button"
          optional: true

- takeScreenshot: "landfall_progress"

# Check health during combat
- assertVisible:
    id: "health-bar"
    optional: true

# Continue gameplay...
- wait: 10000

- takeScreenshot: "gameplay_checkpoint"
