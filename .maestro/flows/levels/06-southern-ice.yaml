# Campaign Level 6: Southern Ice
# Frozen wasteland with cold-adapted enemy variants
# Cross-platform: Web, Android, iOS

appId: ${PLATFORM == 'android' ? 'com.jbcom.stellardescent' : (PLATFORM == 'ios' ? 'com.jbcom.stellardescent' : null)}
url: ${PLATFORM == 'web' ? 'http://localhost:8080' : null}
tags:
  - campaign
  - level-6
  - ice
  - new-enemies
name: "Campaign Level 6 - Southern Ice"

---
- launchApp:
    clearState: true

# Wait for main menu
- extendedWaitUntil:
    visible: "SELECT MISSION"
    timeout: 30000

# Open level select
- tapOn:
    text: "SELECT MISSION"

- wait: 1000

# Look for Southern Ice (Chapter 6)
- assertVisible:
    text: "CHAPTER 6"
    optional: true
    timeout: 5000

# Select Southern Ice if unlocked
- tapOn:
    text: "SOUTHERN ICE"
    optional: true

- wait: 500

- takeScreenshot: "level_06_select_state"

# Wait for mission briefing
- assertVisible:
    text: "MISSION BRIEFING"
    optional: true
    timeout: 10000

# Verify mission details
- assertVisible:
    text: "SOUTHERN ICE"
    optional: true

- assertVisible:
    text: "Polar Region"
    optional: true

- assertVisible:
    text: "ACT 3: THE TRUTH"
    optional: true

- takeScreenshot: "level_06_briefing"

# Check intel for new enemy types
- tapOn:
    text: "INTEL"
    optional: true

- wait: 500

# Should show FROST CHITIN intel
- assertVisible:
    text: "FROST CHITIN"
    optional: true

- assertVisible:
    text: "ICE STORM"
    optional: true

- assertVisible:
    text: "cold-adapted"
    optional: true

- takeScreenshot: "level_06_intel"

# Check loadout for thermal gear
- tapOn:
    text: "LOADOUT"
    optional: true

- wait: 500

# Should show flamethrower and thermal pack
- assertVisible:
    text: "FLAMETHROWER"
    optional: true

- assertVisible:
    text: "THERMAL PACK"
    optional: true

- takeScreenshot: "level_06_loadout"

# Begin mission
- tapOn:
    text: "BEGIN MISSION"
    optional: true

# Wait for loading
- extendedWaitUntil:
    visible: "SYSTEMS ONLINE"
    timeout: 60000
    optional: true

- wait: 3000

- takeScreenshot: "level_06_start"

# Frozen environment gameplay
- swipe:
    start: "10%, 70%"
    end: "15%, 55%"
    duration: 3000

# Check for weather effects
- wait: 2000

- takeScreenshot: "level_06_ice_environment"

# Combat against frost enemies
- swipe:
    start: "80%, 50%"
    end: "70%, 45%"
    duration: 1000

- tapOn:
    id: "fire-button"
    optional: true

- wait: 500

- tapOn:
    id: "fire-button"
    optional: true

- takeScreenshot: "level_06_combat"

# Continue exploration
- repeat:
    times: 2
    commands:
      - swipe:
          start: "10%, 70%"
          end: "18%, 60%"
          duration: 2500
      - wait: 1000

- takeScreenshot: "level_06_gameplay"
