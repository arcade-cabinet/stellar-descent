# New Game Flow - Starts a new game and enters tutorial
# Works on: Web
tags:
  - gameplay
  - campaign
  - critical
name: "New Game Start - Campaign Entry"

---
- openLink: "http://localhost:8080"

- extendedWaitUntil:
    visible: "NEW GAME"
    timeout: 30000

- tapOn:
    text: "NEW GAME"

# Wait for difficulty selection or loading screen
- extendedWaitUntil:
    visible:
      anyOf:
        - "ROOKIE"
        - "LOADING"
        - "ANCHOR STATION"
    timeout: 10000

# If difficulty modal appears, select NORMAL
- runFlow:
    when:
      visible: "NORMAL"
    commands:
      - tapOn:
          text: "NORMAL"

# Wait for loading screen to show level name
- extendedWaitUntil:
    visible: "ANCHOR STATION"
    timeout: 30000

- takeScreenshot: "loading_screen"

# Wait for gameplay to start - canvas should be present
- extendedWaitUntil:
    visible: "canvas"
    timeout: 60000

- takeScreenshot: "game_started"
