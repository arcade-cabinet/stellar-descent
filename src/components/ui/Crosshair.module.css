/* Crosshair - Tactical reticle for combat phases */

.crosshair {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  pointer-events: none;
  z-index: 100;

  /* Base transition for smooth state changes */
  transition: transform 0.08s ease-out;
}

/* Expansion when firing */
.crosshair.firing {
  transform: translate(-50%, -50%) scale(1.15);
}

/* Center dot */
.dot {
  position: absolute;
  width: 4px;
  height: 4px;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 50%;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  transition:
    background-color 0.1s ease,
    box-shadow 0.1s ease;
  box-shadow: 0 0 2px rgba(0, 0, 0, 0.5);
}

/* Crosshair lines */
.line {
  position: absolute;
  background: rgba(255, 255, 255, 0.75);
  transition:
    background-color 0.1s ease,
    transform 0.08s ease-out;
}

/* Vertical lines (top/bottom) */
.line.top,
.line.bottom {
  width: 2px;
  height: 10px;
  left: 50%;
  transform: translateX(-50%);
}

.line.top {
  bottom: calc(50% + 6px);
}

.line.bottom {
  top: calc(50% + 6px);
}

/* Horizontal lines (left/right) */
.line.left,
.line.right {
  width: 10px;
  height: 2px;
  top: 50%;
  transform: translateY(-50%);
}

.line.left {
  right: calc(50% + 6px);
}

.line.right {
  left: calc(50% + 6px);
}

/* Firing expansion - lines move outward */
.crosshair.firing .line.top {
  bottom: calc(50% + 8px);
}

.crosshair.firing .line.bottom {
  top: calc(50% + 8px);
}

.crosshair.firing .line.left {
  right: calc(50% + 8px);
}

.crosshair.firing .line.right {
  left: calc(50% + 8px);
}

/* Hover state - enemy targeted (colorblind-aware) */
.crosshair.hover .dot {
  background: var(--cb-crosshair-hover, #ffbf00);
  box-shadow: 0 0 6px currentColor;
}

.crosshair.hover .line {
  background: var(--cb-crosshair-hover, rgba(255, 191, 0, 0.85));
  opacity: 0.85;
}

/* Hit state - damage confirmed (colorblind-aware) */
.crosshair.hit .dot {
  background: var(--cb-crosshair-hit, #ff4444);
  box-shadow: 0 0 8px currentColor;
}

.crosshair.hit .line {
  background: var(--cb-crosshair-hit, rgba(255, 68, 68, 0.9));
  opacity: 0.9;
}

/* Hit ring - expands outward on hit (colorblind-aware) */
.hitRing {
  position: absolute;
  width: 24px;
  height: 24px;
  border: 2px solid var(--cb-crosshair-hit, rgba(255, 68, 68, 0.8));
  border-radius: 50%;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%) scale(0.5);
  animation: hitExpand 0.15s ease-out forwards;
  pointer-events: none;
}

/* Shape indicators for colorblind mode - adds diamond shape when hovering enemy */
.cb-shapes .crosshair.hover::before {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 36px;
  height: 36px;
  transform: translate(-50%, -50%) rotate(45deg);
  border: 2px solid var(--cb-crosshair-hover, #ffbf00);
  opacity: 0.6;
  pointer-events: none;
}

/* X shape indicator on hit for additional feedback */
.cb-shapes .crosshair.hit::after {
  content: "X";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-family: "Courier New", monospace;
  font-size: 0.625rem;
  font-weight: bold;
  color: var(--cb-crosshair-hit, #ff4444);
  pointer-events: none;
  text-shadow: 0 0 4px currentColor;
}

@keyframes hitExpand {
  from {
    transform: translate(-50%, -50%) scale(0.5);
    opacity: 1;
  }
  to {
    transform: translate(-50%, -50%) scale(1.5);
    opacity: 0;
  }
}

/* Mobile adjustments - slightly larger for touch visibility */
@media (max-width: 768px) {
  .dot {
    width: 6px;
    height: 6px;
  }

  .line.top,
  .line.bottom {
    width: 3px;
    height: 12px;
  }

  .line.left,
  .line.right {
    width: 12px;
    height: 3px;
  }

  .line.top {
    bottom: calc(50% + 8px);
  }

  .line.bottom {
    top: calc(50% + 8px);
  }

  .line.left {
    right: calc(50% + 8px);
  }

  .line.right {
    left: calc(50% + 8px);
  }

  .crosshair.firing .line.top {
    bottom: calc(50% + 10px);
  }

  .crosshair.firing .line.bottom {
    top: calc(50% + 10px);
  }

  .crosshair.firing .line.left {
    right: calc(50% + 10px);
  }

  .crosshair.firing .line.right {
    left: calc(50% + 10px);
  }
}

/* Reduced motion preference */
@media (prefers-reduced-motion: reduce) {
  .crosshair {
    transition: none;
  }

  .crosshair.firing {
    transform: translate(-50%, -50%);
  }

  .dot,
  .line {
    transition: none;
  }

  .crosshair.firing .line.top,
  .crosshair.firing .line.bottom,
  .crosshair.firing .line.left,
  .crosshair.firing .line.right {
    /* Keep base positions */
  }

  .hitRing {
    animation: none;
    opacity: 0;
  }
}
